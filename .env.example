# ============================================
# DROPI ORDER STATUS SERVICE - CONFIGURATION
# ============================================

# ============================================
# DROPI API CONFIGURATION
# ============================================
# Base URL de la API de Dropi (sin el sufijo del país)
# El sufijo del país (.co, .mx, .cl, py.com, etc.) se proporciona dinámicamente
# en cada request mediante el parámetro "dropi_country_suffix"
#
# Ejemplo de construcción de URL:
#   Base: https://api.dropi
#   Sufijo en request: "co"
#   URL final: https://api.dropi.co/integrations/orders/myorders
#
DROPI_API_BASE_URL=https://api.dropi

# API Key de Dropi para autenticación
# Se envía en el header "dropi-integration-key"
# Obtén tu API key desde el panel de Dropi
DROPI_API_KEY=tu-api-key-aqui

# ============================================
# WEBHOOK CONFIGURATION
# ============================================
# Base URL del webhook (sin el sufijo específico del cliente)
# El sufijo se proporciona dinámicamente en cada request mediante
# el parámetro "webhook_suffix"
#
# Ejemplo de construcción de URL:
#   Base: https://tu-webhook.com
#   Sufijo en request: "client123/orders"
#   URL final: https://tu-webhook.com/client123/orders
#
# Para desarrollo local:
WEBHOOK_BASE_URL=http://localhost:9000

# Para producción en GCP:
# WEBHOOK_BASE_URL=https://tu-dominio.com

# ============================================
# SERVER CONFIGURATION
# ============================================
# Puerto en el que el servidor escuchará
# En GCP Cloud Run, usa el puerto que Cloud Run asigna (variable $PORT)
PORT=8000

# ============================================
# GCP CLOUD LOGGING CONFIGURATION
# ============================================
# Project ID de GCP para correlacionar logs con traces
# Esto permite ver los logs agrupados por request en Cloud Logging
GCP_PROJECT=tu-project-id

# ============================================
# EJEMPLO DE REQUEST
# ============================================
# POST /process
# Content-Type: application/json
#
# {
#   "api_key": "tu-api-key-aqui",
#   "date": "2025-11-21",
#   "dropi_country_suffix": "co",        // Dinámico: co, mx, cl, py.com, etc.
#   "webhook_suffix": "client123/orders", // Dinámico: path específico del cliente
#   "date_util": "2025-11-24"            // Opcional: fecha hasta (rango de fechas)
# }
#
# URLs construidas:
#   Dropi API: https://api.dropi.co/integrations/orders/myorders?from=2025-11-21&until=2025-11-24
#   Webhook:   http://localhost:9000/client123/orders

# ============================================
# PAÍSES SOPORTADOS
# ============================================
# Colombia:  co
# México:    mx
# Chile:     cl
# Argentina: ar
# Ecuador:   ec
# Guatemala: gt
# Panamá:    pa
# Paraguay:  py.com  (caso especial con punto)
# Perú:      pe

# ============================================
# SEGURIDAD EN GCP CLOUD RUN
# ============================================
# IMPORTANTE: En producción, NO uses este archivo .env
# En su lugar, configura las variables de entorno en GCP:
#
# gcloud run services update dropi-order-status-service \
#   --set-env-vars DROPI_API_BASE_URL=https://api.dropi \
#   --set-env-vars DROPI_API_KEY=tu-api-key \
#   --set-env-vars WEBHOOK_BASE_URL=https://tu-webhook.com \
#   --region us-central1
#
# O usa Secret Manager para datos sensibles:
#
# gcloud run services update dropi-order-status-service \
#   --update-secrets DROPI_API_KEY=dropi-api-key:latest \
#   --region us-central1
